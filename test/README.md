# Simulation Process
## System Configuration
- **Set Parameters:** Edit system parameters in [ZcuConfig.scala](../hardware/src/main/scala/core/ZcuConfig.scala)
- **Recompile Verilog:** Change directory to GCN-Accelerator/hardware. Run 'rm -r verilog/' to remove existing Verilog source files. Then run 'make verilog' to generate Verilog source files with the new system parameters.
- **Prepare Files for Simulation:** Run 'cocotbify -v verilog/Wrapper.v' to prepare the system for simulation with cocotb

## Running a Simulation
- **Generating DRAM Data:** Edit matrix generation parameters and/or the instructions generated in [Dram.py](./Dram.py). Ensure that the test case meets the following parameters:
  - The number of nonzero elements per processing element must be a multiple of the number of columns in the dense matrix
  - The number of columns in the dense matrix must be a power of two
  - The number of instructions must be a multiple of two
- **Prepare the Simulation:** Set the inst_cnt in [testGCN.py](testGCN.py) to be equal to the number of instructions generated by [Dram.py](./Dram.py).
 - **Run the Simulation:** Run 'make'. The simulation will automatically complete when the core state has reached sFinsh and all results have exited the PE's output buffers.